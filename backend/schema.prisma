// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id                String    @id @default(cuid())
  name              String    @default("")
  email             String    @unique @default("")
  password          String?
  from_Listing_user Listing[] @relation("Listing_user")
}

model Product {
  id          String        @id @default(cuid())
  name        String        @default("")
  description String        @default("")
  photo       ProductImage? @relation("Product_photo", fields: [photoId], references: [id])
  photoId     String?       @unique @map("photo")
  status      String?       @default("DRAFT")
  price       Int?
}

model ProductImage {
  id      String   @id @default(cuid())
  image   Json?
  altText String   @default("")
  product Product? @relation("Product_photo")
}

model Listing {
  id                               String         @id @default(cuid())
  accomodationName                 String         @default("")
  accomodationShortDescription     String         @default("")
  accomodationDetailedtDescription String         @default("")
  licenceNum                       String         @default("")
  user                             User?          @relation("Listing_user", fields: [userId], references: [id])
  userId                           String?        @map("user")
  address                          Address?       @relation("Listing_address", fields: [addressId], references: [id])
  addressId                        String?        @map("address")
  photo                            ListingImage[] @relation("Listing_photo")

  @@index([userId])
  @@index([addressId])
}

model Address {
  id                   String    @id @default(cuid())
  streetNum            Int
  postalCode           String    @default("")
  townName             String    @default("")
  country              String
  from_Listing_address Listing[] @relation("Listing_address")
}

model ListingImage {
  id                 String    @id @default(cuid())
  image              Json?
  altText            String    @default("")
  from_Listing_photo Listing[] @relation("Listing_photo")
}
